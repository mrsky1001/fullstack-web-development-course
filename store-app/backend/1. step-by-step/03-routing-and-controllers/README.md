# –£—Ä–æ–∫ 3: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

## üéØ –¶–µ–ª—å —É—Ä–æ–∫–∞

–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ä–∞–∑–¥–µ–ª–∏–≤ –º–∞—Ä—à—Ä—É—Ç—ã (Routers) –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (Controllers).

## üìö –ò–∑—É—á–∞–µ–º—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

1. **Express Router** ‚Äî –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
2. **Controller Pattern** ‚Äî –æ—Ä–∞–≥–Ω–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
3. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞** ‚Äî `:id` –∏ `req.params`
4. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** ‚Äî –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –¥–µ–ª–∞–µ—Ç –æ–¥–Ω–æ –¥–µ–ª–æ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
03-routing-and-controllers/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app.js                     # –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ server.js                  # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ product.router.js      # –ú–∞—Ä—à—Ä—É—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ controllers/
‚îÇ       ‚îî‚îÄ‚îÄ product.controller.js  # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

## üõ†Ô∏è –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| `routes/` | –ü–∞–ø–∫–∞ —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞–º–∏ |
| `controllers/` | –ü–∞–ø–∫–∞ —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ |
| `express.Router()` | –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ |
| `req.params` | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL |

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd lessons/03-routing-and-controllers
npm install
npm start
```

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-------|----------|
| `/product/all` | GET | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ |
| `/product/:id` | GET | –û–¥–∏–Ω —Ç–æ–≤–∞—Ä –ø–æ ID |

## üîë –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –°–æ–∑–¥–∞–Ω–∏–µ Router

```javascript
// routes/product.router.js
const express = require('express');
const router = express.Router();

router.get('/all', controller.getAllProducts);
router.get('/:id', controller.getProduct);

module.exports = router;
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Router –≤ app.js

```javascript
// app.js
const productRouter = require('./routes/product.router');
app.use('/product', productRouter);
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Controller

```javascript
// controllers/product.controller.js
exports.getAllProducts = (req, res) => {
    res.json({ data: [...] });
};

exports.getProduct = (req, res) => {
    const id = req.params.id;
    // ...
};
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞

```javascript
// –ú–∞—Ä—à—Ä—É—Ç: /product/:id
// URL: /product/5

app.get('/product/:id', (req, res) => {
    console.log(req.params.id); // "5" (string!)
});
```

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ó–∞–ø—Ä–æ—Å –∫–ª–∏–µ–Ω—Ç–∞
       ‚Üì
   app.js (middleware)
       ‚Üì
   Router (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç—å)
       ‚Üì
   Controller (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç)
       ‚Üì
   –û—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É
```

## üìù –ó–∞–¥–∞–Ω–∏—è –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏

1. –î–æ–±–∞–≤—å—Ç–µ –º–∞—Ä—à—Ä—É—Ç `POST /product/add` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
2. –î–æ–±–∞–≤—å—Ç–µ –º–∞—Ä—à—Ä—É—Ç `DELETE /product/:id` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/product/all?category=CPU`)

## ‚û°Ô∏è –ß—Ç–æ –¥–∞–ª—å—à–µ?

–í —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ –º—ã –∏–∑—É—á–∏–º **Middleware** ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–æ–ª—É—á–µ–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ—Ç–≤–µ—Ç–∞ (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –¥—Ä.).
