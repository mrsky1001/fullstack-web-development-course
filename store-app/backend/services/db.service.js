/**
 * SERVICE: Database (База Данных)
 * 
 * Отвечает за подключение к MySQL.
 * Использует 'mysql2/promise' для работы с async/await (современный подход).
 * 
 * Вместо того, чтобы открывать и закрывать соединение для каждого запроса,
 * мы используем Pool (Пул соединений). Это намного эфективнее, так как сервер
 * держит несколько открытых соединений готовыми к работе.
 */

const mysql = require("mysql2");

// Создаем пул соединений
const db = mysql.createPool({
    connectionLimit: 5,        // Максимум 5 одновременных соединений
    host: "localhost",         // Адрес сервера БД
    user: "root",              // Имя пользователя БД
    password: "admin",         // Пароль пользователя БД
    database: "storedb"        // Имя базы данных
}).promise(); // ВАЖНО: .promise() позволяет использовать await db.execute(...)

module.exports = db;