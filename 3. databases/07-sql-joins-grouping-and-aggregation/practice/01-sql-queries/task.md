# –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: SQL –∑–∞–ø—Ä–æ—Å—ã

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–í —ç—Ç–æ–º –∑–∞–¥–∞–Ω–∏–∏ –≤—ã –Ω–∞–ø–∏—à–µ—Ç–µ SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–∞.

## üéØ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `storedb` —Å–æ–∑–¥–∞–Ω–∞
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ –ø–∞–ø–∫–∏ `examples/` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –¥–∞–Ω–Ω—ã—Ö

## üìù –ó–∞–¥–∞–Ω–∏—è

### –£—Ä–æ–≤–µ–Ω—å 1: –ë–∞–∑–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**1.1.** –ü–æ–ª—É—á–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ü–µ–Ω–æ–π –±–æ–ª—å—à–µ 50000 ‚ÇΩ

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**1.2.** –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–í–∏–¥–µ–æ–∫–∞—Ä—Ç—ã" (category_id = 2)

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**1.3.** –í—ã–≤–µ–¥–∏—Ç–µ 5 —Å–∞–º—ã—Ö –¥–æ—Ä–æ–≥–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**1.4.** –ù–∞–π–¥–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã, –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å "Intel" –∏–ª–∏ "AMD"

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**1.5.** –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã —Å —Ü–µ–Ω–æ–π –æ—Ç 20000 –¥–æ 50000 ‚ÇΩ, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Ü–µ–Ω–µ

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

### –£—Ä–æ–≤–µ–Ω—å 2: JOIN

**2.1.** –í—ã–≤–µ–¥–∏—Ç–µ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**2.2.** –ü–æ–ª—É—á–∏—Ç–µ –≤—Å–µ –∑–∞–∫–∞–∑—ã —Å –∏–º–µ–Ω–∞–º–∏ –∏ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**2.3.** –í—ã–≤–µ–¥–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ #1 (—Ç–æ–≤–∞—Ä—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Ü–µ–Ω—ã)

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**2.4.** –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ù–ï –¥–µ–ª–∞–ª–∏ –∑–∞–∫–∞–∑–æ–≤

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**2.5.** –ù–∞–π–¥–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞–∫–∞–∑—ã–≤–∞–ª

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

### –£—Ä–æ–≤–µ–Ω—å 3: GROUP BY –∏ –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**3.1.** –ü–æ–¥—Å—á–∏—Ç–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**3.2.** –ù–∞–π–¥–∏—Ç–µ —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**3.3.** –ü–æ–¥—Å—á–∏—Ç–∞–π—Ç–µ –æ–±—â—É—é —Å—É–º–º—É –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**3.4.** –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ—Ç—Ä–∞—Ç–∏–≤—à–µ–≥–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –¥–µ–Ω–µ–≥

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**3.5.** –í—ã–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É —Å—Ç–∞—Ç—É—Å—É

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

### –£—Ä–æ–≤–µ–Ω—å 4: –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**4.1.** –ù–∞–π–¥–∏—Ç–µ —Ç–æ–ø-3 —Å–∞–º—ã—Ö –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–∞ (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É)

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**4.2.** –ù–∞–π–¥–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –≥–¥–µ —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –≤—ã—à–µ 40000 ‚ÇΩ

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**4.3.** –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–æ—Ä–æ–∂–µ —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –ø–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**4.4.** –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –±–æ–ª–µ–µ —á–µ–º 1 –∑–∞–∫–∞–∑–æ–º

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

**4.5.** –í—ã–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ—Ä–∑–∏–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID = 2

```sql
-- –í–∞—à –∑–∞–ø—Ä–æ—Å:

```

## ‚è± –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

~45-60 –º–∏–Ω—É—Ç

## ‚úÖ –û—Ç–≤–µ—Ç—ã

<details>
<summary>–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç—ã (–ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è!)</summary>

**1.1:**
```sql
SELECT * FROM products WHERE product_price > 50000;
```

**1.2:**
```sql
SELECT * FROM products WHERE category_id = 2;
```

**1.3:**
```sql
SELECT product_name, product_price 
FROM products 
ORDER BY product_price DESC 
LIMIT 5;
```

**1.4:**
```sql
SELECT * FROM products 
WHERE product_name LIKE '%Intel%' 
   OR product_name LIKE '%AMD%';
```

**1.5:**
```sql
SELECT * FROM products 
WHERE product_price BETWEEN 20000 AND 50000
ORDER BY product_price;
```

**2.1:**
```sql
SELECT p.product_name, p.product_price, c.category_name
FROM products p
INNER JOIN categories c ON p.category_id = c.category_id;
```

**2.2:**
```sql
SELECT o.order_id, o.total, o.status, u.user_name, u.user_email
FROM orders o
INNER JOIN users u ON o.user_id = u.user_id;
```

**2.3:**
```sql
SELECT o.order_id, p.product_name, oi.quantity, oi.price_at_purchase
FROM orders o
INNER JOIN order_items oi ON o.order_id = oi.order_id
INNER JOIN products p ON oi.product_id = p.product_id
WHERE o.order_id = 1;
```

**2.4:**
```sql
SELECT u.user_name, u.user_email
FROM users u
LEFT JOIN orders o ON u.user_id = o.user_id
WHERE o.order_id IS NULL;
```

**2.5:**
```sql
SELECT p.product_name, p.product_price
FROM products p
LEFT JOIN order_items oi ON p.product_id = oi.product_id
WHERE oi.item_id IS NULL;
```

**3.1:**
```sql
SELECT c.category_name, COUNT(p.product_id) AS count
FROM categories c
LEFT JOIN products p ON c.category_id = p.category_id
GROUP BY c.category_id;
```

**3.2:**
```sql
SELECT c.category_name, ROUND(AVG(p.product_price), 2) AS avg_price
FROM categories c
INNER JOIN products p ON c.category_id = p.category_id
GROUP BY c.category_id
ORDER BY avg_price DESC;
```

**3.3:**
```sql
SELECT SUM(total) AS total_revenue FROM orders;
```

**3.4:**
```sql
SELECT u.user_name, SUM(o.total) AS total_spent
FROM users u
INNER JOIN orders o ON u.user_id = o.user_id
GROUP BY u.user_id
ORDER BY total_spent DESC
LIMIT 1;
```

**3.5:**
```sql
SELECT status, COUNT(*) AS count
FROM orders
GROUP BY status;
```

**4.1:**
```sql
SELECT p.product_name, SUM(oi.quantity) AS sold
FROM products p
INNER JOIN order_items oi ON p.product_id = oi.product_id
GROUP BY p.product_id
ORDER BY sold DESC
LIMIT 3;
```

**4.2:**
```sql
SELECT c.category_name, AVG(p.product_price) AS avg_price
FROM categories c
INNER JOIN products p ON c.category_id = p.category_id
GROUP BY c.category_id
HAVING avg_price > 40000;
```

**4.3:**
```sql
SELECT product_name, product_price
FROM products
WHERE product_price > (SELECT AVG(product_price) FROM products);
```

**4.4:**
```sql
SELECT u.user_name, COUNT(o.order_id) AS orders_count
FROM users u
INNER JOIN orders o ON u.user_id = o.user_id
GROUP BY u.user_id
HAVING orders_count > 1;
```

**4.5:**
```sql
SELECT 
    u.user_name,
    p.product_name,
    p.product_price,
    sc.quantity,
    (p.product_price * sc.quantity) AS subtotal
FROM shopping_cart sc
INNER JOIN users u ON sc.user_id = u.user_id
INNER JOIN products p ON sc.product_id = p.product_id
WHERE sc.user_id = 2;
```

</details>
