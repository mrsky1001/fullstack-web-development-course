/* ================================================
   УРОК 09: ПЕРЕМЕННЫЕ В JAVASCRIPT
   ================================================
   
   Этот файл демонстрирует работу с переменными
   в JavaScript с подробными комментариями.
   
   Переменная — это именованный контейнер для
   хранения данных в памяти программы.
*/

// ================================================
// РАЗДЕЛ 1: ОБЪЯВЛЕНИЕ ПЕРЕМЕННЫХ
// ================================================

// ------------------------------------------------
// 1.1 const — константа
// ------------------------------------------------
// Используйте const по умолчанию.
// Значение нельзя переприсвоить после инициализации.

const PI = 3.14159;
console.log('Число Пи:', PI);

const APP_NAME = 'Мой Сайт';
console.log('Название приложения:', APP_NAME);

// ОШИБКА: нельзя переприсвоить константу
// PI = 3.14;  // TypeError: Assignment to constant variable

// ВАЖНО: const должна быть инициализирована при объявлении
// const EMPTY;  // SyntaxError: Missing initializer

// ------------------------------------------------
// 1.2 let — переменная
// ------------------------------------------------
// Используйте let, когда значение будет меняться.

let counter = 0;
console.log('Начальное значение счётчика:', counter);

counter = counter + 1;  // Увеличиваем на 1
console.log('После увеличения:', counter);

counter++;  // Сокращённая запись
console.log('После инкремента:', counter);

// let можно объявить без инициализации
let userName;
console.log('До присваивания:', userName);  // undefined

userName = 'Иван';
console.log('После присваивания:', userName);

// ------------------------------------------------
// 1.3 var — устаревший способ (НЕ РЕКОМЕНДУЕТСЯ)
// ------------------------------------------------
// var имеет проблемы с областью видимости.
// Используйте let/const вместо var.

var oldVariable = 'Я объявлена через var';
console.log('var:', oldVariable);

// Проблема var: "поднятие" (hoisting)
console.log('hoisted:', hoistedVar);  // undefined (не ошибка!)
var hoistedVar = 'Я поднята';

// С let была бы ошибка:
// console.log(notHoisted);  // ReferenceError
// let notHoisted = 'Я не поднята';

// ================================================
// РАЗДЕЛ 2: ПРАВИЛА ИМЕНОВАНИЯ
// ================================================

// ------------------------------------------------
// Допустимые имена переменных
// ------------------------------------------------

// camelCase — рекомендуемый стиль
let firstName = 'Иван';
let lastName = 'Иванов';
let userAge = 25;
let isActive = true;

// С подчёркиванием (для "приватных" переменных)
let _privateData = 'внутренние данные';

// С долларом (используется в некоторых библиотеках)
let $element = 'jQuery style';

// Начинается с буквы, содержит цифры
let user1 = 'Первый пользователь';
let item2Price = 199.99;

// КОНСТАНТЫ — в UPPER_SNAKE_CASE
const MAX_ATTEMPTS = 3;
const API_BASE_URL = 'https://api.example.com';
const DEFAULT_TIMEOUT = 5000;

// ------------------------------------------------
// Недопустимые имена (вызовут ошибку)
// ------------------------------------------------

// Нельзя начинать с цифры
// let 1user = 'ошибка';  // SyntaxError

// Нельзя использовать дефис
// let user-name = 'ошибка';  // SyntaxError

// Нельзя использовать зарезервированные слова
// let let = 'ошибка';      // SyntaxError
// let const = 'ошибка';    // SyntaxError
// let function = 'ошибка'; // SyntaxError
// let class = 'ошибка';    // SyntaxError

console.log('--- Переменные объявлены корректно ---');

// ================================================
// РАЗДЕЛ 3: ОБЛАСТЬ ВИДИМОСТИ (SCOPE)
// ================================================

// ------------------------------------------------
// 3.1 Глобальная область видимости
// ------------------------------------------------

const globalConst = 'Я доступна везде';
let globalLet = 'Я тоже доступна везде';

function demonstrateScope() {
    console.log('Внутри функции:', globalConst);  // OK
    console.log('Внутри функции:', globalLet);    // OK
}

demonstrateScope();

// ------------------------------------------------
// 3.2 Блочная область видимости (let, const)
// ------------------------------------------------

if (true) {
    const blockConst = 'Я только внутри блока';
    let blockLet = 'Я тоже только внутри блока';
    console.log('Внутри if:', blockConst);
    console.log('Внутри if:', blockLet);
}

// console.log(blockConst);  // ReferenceError: blockConst is not defined
// console.log(blockLet);    // ReferenceError: blockLet is not defined

// ------------------------------------------------
// 3.3 Проблема var — функциональная область видимости
// ------------------------------------------------

if (true) {
    var varVariable = 'Я вылезла за блок!';
}

console.log('var вне блока:', varVariable);  // Работает! (это плохо)

// Именно поэтому мы используем let/const вместо var

// ================================================
// РАЗДЕЛ 4: МНОЖЕСТВЕННОЕ ОБЪЯВЛЕНИЕ
// ================================================

// ------------------------------------------------
// Объявление нескольких переменных
// ------------------------------------------------

// Способ 1: Каждая на своей строке (рекомендуется)
const firstName2 = 'Иван';
const lastName2 = 'Петров';
const age2 = 30;

// Способ 2: Через запятую (компактнее, но менее читабельно)
let a = 1, b = 2, c = 3;

// Способ 3: Деструктуризация (продвинутый уровень)
const [x, y, z] = [10, 20, 30];
console.log('Деструктуризация:', x, y, z);

// ================================================
// РАЗДЕЛ 5: ПРАКТИЧЕСКИЕ ПРИМЕРЫ
// ================================================

console.log('\n--- Практические примеры ---');

// ------------------------------------------------
// Пример 1: Счётчик посетителей
// ------------------------------------------------

let visitorCount = 0;

function registerVisitor() {
    visitorCount++;
    console.log('Посетителей:', visitorCount);
}

registerVisitor();  // 1
registerVisitor();  // 2
registerVisitor();  // 3

// ------------------------------------------------
// Пример 2: Настройки приложения
// ------------------------------------------------

const config = {
    theme: 'dark',
    language: 'ru',
    fontSize: 16
};

// const не мешает изменять свойства объекта
config.theme = 'light';
console.log('Тема изменена:', config.theme);

// Но нельзя заменить весь объект
// config = {};  // TypeError

// ------------------------------------------------
// Пример 3: Обмен значений переменных
// ------------------------------------------------

let first = 'Первый';
let second = 'Второй';

console.log('До обмена:', first, second);

// Современный способ (деструктуризация)
[first, second] = [second, first];

console.log('После обмена:', first, second);

// ================================================
// ИТОГ
// ================================================

console.log('\n--- Итог ---');
console.log('Всегда начинайте с const.');
console.log('Используйте let, если значение будет меняться.');
console.log('Никогда не используйте var в современном коде.');
